# Androidå››å¤§ç»„ä»¶é¢è¯•é¢˜

æœ¬ç« èŠ‚åŒ…å«Androidå››å¤§ç»„ä»¶ï¼ˆActivityã€Serviceã€BroadcastReceiverã€ContentProviderï¼‰ç›¸å…³çš„é«˜é¢‘é¢è¯•é¢˜ã€‚

## Activity

### ğŸ”¥ é—®ç­”é¢˜1ï¼šActivityä»»åŠ¡æ ˆ

è¯·è§£é‡ŠAndroidä¸­Activityä»»åŠ¡æ ˆï¼ˆTask Stackï¼‰çš„æ¦‚å¿µï¼Œä»¥åŠå®ƒä¸Activityå¯åŠ¨æ¨¡å¼çš„å…³ç³»ã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

1. **ä»»åŠ¡æ ˆåŸºæœ¬æ¦‚å¿µ**ï¼š
   - ä»»åŠ¡æ ˆæ˜¯ä¸€ä¸ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ ˆç»“æ„
   - ç”¨äºå­˜å‚¨å½“å‰è¿è¡Œçš„Activityå®ä¾‹
   - æ¯ä¸ªä»»åŠ¡æ ˆéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„IDï¼ˆtaskIdï¼‰
   - é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒä¸€åº”ç”¨çš„Activityåœ¨åŒä¸€ä¸ªä»»åŠ¡æ ˆä¸­

2. **ä»»åŠ¡æ ˆä¸å¯åŠ¨æ¨¡å¼çš„å…³ç³»**ï¼š
   - standardï¼šæ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°å®ä¾‹å¹¶å‹å…¥å½“å‰ä»»åŠ¡æ ˆ
   - singleTopï¼šæ ˆé¡¶å¤ç”¨ï¼Œå…¶ä»–æƒ…å†µåˆ›å»ºæ–°å®ä¾‹
   - singleTaskï¼šåœ¨æ–°ä»»åŠ¡æ ˆä¸­åˆ›å»ºå®ä¾‹ï¼Œå¹¶æ¸…ç©ºå…¶ä¸Šçš„Activity
   - singleInstanceï¼šç‹¬å ä¸€ä¸ªä»»åŠ¡æ ˆï¼Œä¸å…è®¸å…¶ä»–Activityè¿›å…¥

3. **ä»£ç ç¤ºä¾‹**ï¼š
```kotlin
// åœ¨AndroidManifest.xmlä¸­é…ç½®ä»»åŠ¡æ ˆ
<activity
    android:name=".MainActivity"
    android:taskAffinity="com.example.task"
    android:launchMode="singleTask" />

// é€šè¿‡Intentæ ‡å¿—ä½æ§åˆ¶ä»»åŠ¡æ ˆè¡Œä¸º
Intent(this, SecondActivity::class.java).apply {
    flags = Intent.FLAG_ACTIVITY_NEW_TASK
    // æˆ–è€…
    flags = Intent.FLAG_ACTIVITY_CLEAR_TOP
}
```

4. **ä½¿ç”¨åœºæ™¯**ï¼š
   - åº”ç”¨ä¸»é¡µé¢è¿”å›æ—¶æ¸…ç©ºä»»åŠ¡æ ˆ
   - ç‰¹å®šé¡µé¢éœ€è¦åœ¨æ–°ä»»åŠ¡æ ˆä¸­æ‰“å¼€
   - å¤šåº”ç”¨å…±äº«é¡µé¢çš„ä»»åŠ¡æ ˆç®¡ç†
</details>

## Service

### ğŸ”¥ é—®ç­”é¢˜2ï¼šServiceçš„ä¸¤ç§å¯åŠ¨æ–¹å¼

è¯·è¯¦ç»†è¯´æ˜Serviceçš„ä¸¤ç§å¯åŠ¨æ–¹å¼ï¼ˆstartServiceå’ŒbindServiceï¼‰çš„åŒºåˆ«ï¼Œä»¥åŠå®ƒä»¬çš„ä½¿ç”¨åœºæ™¯ã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

1. **startServiceæ–¹å¼**ï¼š
   - ç”Ÿå‘½å‘¨æœŸï¼šonCreate() â†’ onStartCommand() â†’ onDestroy()
   - ç‰¹ç‚¹ï¼š
     * Serviceä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°è°ƒç”¨stopService()
     * å¤šæ¬¡è°ƒç”¨startService()åªä¼šè§¦å‘å¤šæ¬¡onStartCommand()
     * ä¸è°ƒç”¨è€…æ— å…³è”ï¼Œè°ƒç”¨è€…é€€å‡ºåServiceä»ç„¶è¿è¡Œ
   - ä½¿ç”¨åœºæ™¯ï¼š
     * åå°éŸ³ä¹æ’­æ”¾
     * æ–‡ä»¶ä¸‹è½½
     * æ•°æ®åŒæ­¥

2. **bindServiceæ–¹å¼**ï¼š
   - ç”Ÿå‘½å‘¨æœŸï¼šonCreate() â†’ onBind() â†’ onUnbind() â†’ onDestroy()
   - ç‰¹ç‚¹ï¼š
     * Serviceä¸è°ƒç”¨è€…ç»‘å®šï¼Œå¯ä»¥è¿›è¡Œé€šä¿¡
     * å½“æ‰€æœ‰ç»‘å®šè€…éƒ½è§£ç»‘åï¼ŒServiceä¼šè‡ªåŠ¨é”€æ¯
     * å¯ä»¥åŒæ—¶è¢«å¤šä¸ªç»„ä»¶ç»‘å®š
   - ä½¿ç”¨åœºæ™¯ï¼š
     * éœ€è¦ä¸Serviceäº¤äº’çš„åœºæ™¯
     * éœ€è¦è·å–Serviceè¿è¡ŒçŠ¶æ€
     * è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰

3. **ä»£ç ç¤ºä¾‹**ï¼š
```kotlin
// Serviceå®šä¹‰
class MyService : Service() {
    private val binder = LocalBinder()

    inner class LocalBinder : Binder() {
        fun getService(): MyService = this@MyService
    }

    override fun onBind(intent: Intent): IBinder {
        return binder
    }

    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {
        // å¤„ç†startService()çš„ä»»åŠ¡
        return START_STICKY
    }
}

// Activityä¸­ä½¿ç”¨
class MainActivity : AppCompatActivity() {
    private var myService: MyService? = null
    
    private val connection = object : ServiceConnection {
        override fun onServiceConnected(name: ComponentName?, service: IBinder?) {
            val binder = service as MyService.LocalBinder
            myService = binder.getService()
        }

        override fun onServiceDisconnected(name: ComponentName?) {
            myService = null
        }
    }

    private fun startMyService() {
        // æ–¹å¼1ï¼šå¯åŠ¨æœåŠ¡
        startService(Intent(this, MyService::class.java))

        // æ–¹å¼2ï¼šç»‘å®šæœåŠ¡
        bindService(
            Intent(this, MyService::class.java),
            connection,
            Context.BIND_AUTO_CREATE
        )
    }

    override fun onDestroy() {
        super.onDestroy()
        // è§£ç»‘æœåŠ¡
        unbindService(connection)
    }
}
```

4. **æ³¨æ„äº‹é¡¹**ï¼š
   - ä¸¤ç§æ–¹å¼å¯ä»¥åŒæ—¶ä½¿ç”¨
   - bindServiceéœ€è¦åœ¨ç»„ä»¶é”€æ¯æ—¶è§£ç»‘
   - Serviceé»˜è®¤è¿è¡Œåœ¨ä¸»çº¿ç¨‹ï¼Œè€—æ—¶æ“ä½œéœ€è¦æ”¾åœ¨å­çº¿ç¨‹
   - Android 8.0åå°Serviceé™åˆ¶éœ€è¦è€ƒè™‘
</details>

## BroadcastReceiver

### ğŸ”¥ é—®ç­”é¢˜3ï¼šå¹¿æ’­çš„æ³¨å†Œæ–¹å¼å’Œç±»å‹

è¯·è¯¦ç»†è¯´æ˜BroadcastReceiverçš„æ³¨å†Œæ–¹å¼ï¼ˆåŠ¨æ€æ³¨å†Œå’Œé™æ€æ³¨å†Œï¼‰ä»¥åŠå¹¿æ’­çš„ç±»å‹ï¼ˆæœ‰åºå¹¿æ’­å’Œæ— åºå¹¿æ’­ï¼‰ã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

1. **æ³¨å†Œæ–¹å¼**ï¼š

   a) **é™æ€æ³¨å†Œ**ï¼š
   ```xml
   <!-- åœ¨AndroidManifest.xmlä¸­æ³¨å†Œ -->
   <receiver
       android:name=".MyReceiver"
       android:exported="true">
       <intent-filter>
           <action android:name="android.intent.action.BOOT_COMPLETED" />
       </intent-filter>
   </receiver>
   ```
   - ç‰¹ç‚¹ï¼š
     * åº”ç”¨æœªå¯åŠ¨ä¹Ÿèƒ½æ¥æ”¶å¹¿æ’­
     * é€‚åˆæ¥æ”¶ç³»ç»Ÿå¹¿æ’­
     * Android 8.0åå¤§éƒ¨åˆ†ç³»ç»Ÿå¹¿æ’­æ— æ³•é™æ€æ³¨å†Œ

   b) **åŠ¨æ€æ³¨å†Œ**ï¼š
   ```kotlin
   class MainActivity : AppCompatActivity() {
       private val receiver = object : BroadcastReceiver() {
           override fun onReceive(context: Context?, intent: Intent?) {
               // å¤„ç†å¹¿æ’­
           }
       }

       override fun onCreate(savedInstanceState: Bundle?) {
           super.onCreate(savedInstanceState)
           registerReceiver(receiver, IntentFilter("com.example.MY_ACTION"))
       }

       override fun onDestroy() {
           super.onDestroy()
           unregisterReceiver(receiver)
       }
   }
   ```
   - ç‰¹ç‚¹ï¼š
     * éœ€è¦åœ¨ä»£ç ä¸­æ³¨å†Œå’Œè§£æ³¨å†Œ
     * è·Ÿéšç»„ä»¶ç”Ÿå‘½å‘¨æœŸ
     * æ›´çµæ´»ï¼Œå¯ä»¥åŠ¨æ€æ§åˆ¶

2. **å¹¿æ’­ç±»å‹**ï¼š

   a) **æœ‰åºå¹¿æ’­ï¼ˆOrdered Broadcastï¼‰**ï¼š
   ```kotlin
   // å‘é€æœ‰åºå¹¿æ’­
   sendOrderedBroadcast(Intent("com.example.MY_ACTION"), null)

   // æ¥æ”¶è€…å¯ä»¥ä¿®æ”¹å¹¿æ’­æˆ–ç»ˆæ­¢ä¼ é€’
   override fun onReceive(context: Context?, intent: Intent?) {
       // ä¿®æ”¹å¹¿æ’­å†…å®¹
       setResultData("æ–°æ•°æ®")
       // ç»ˆæ­¢å¹¿æ’­ä¼ é€’
       abortBroadcast()
   }
   ```
   - ç‰¹ç‚¹ï¼š
     * æŒ‰ä¼˜å…ˆçº§é¡ºåºä¼ é€’
     * å¯ä»¥è¢«æˆªæ–­
     * å‰é¢çš„æ¥æ”¶è€…å¯ä»¥ä¿®æ”¹å¹¿æ’­å†…å®¹

   b) **æ— åºå¹¿æ’­ï¼ˆNormal Broadcastï¼‰**ï¼š
   ```kotlin
   // å‘é€æ— åºå¹¿æ’­
   sendBroadcast(Intent("com.example.MY_ACTION"))
   ```
   - ç‰¹ç‚¹ï¼š
     * åŒæ—¶å‘é€ç»™æ‰€æœ‰æ¥æ”¶è€…
     * æ¥æ”¶é¡ºåºä¸ç¡®å®š
     * æ— æ³•è¢«æˆªæ–­

3. **æœ€ä½³å®è·µ**ï¼š
   - ä¼˜å…ˆä½¿ç”¨LocalBroadcastManagerå‘é€åº”ç”¨å†…å¹¿æ’­
   - åŠ¨æ€æ³¨å†Œè®°å¾—åŠæ—¶è§£æ³¨å†Œ
   - å¹¿æ’­æ¥æ”¶è€…ä¸­é¿å…è€—æ—¶æ“ä½œ
   - æ³¨æ„å¹¿æ’­å®‰å…¨æ€§ï¼Œåˆç†ä½¿ç”¨æƒé™
</details>

## ContentProvider

### ğŸ”¥ ç¼–ç¨‹é¢˜1ï¼šè‡ªå®šä¹‰ContentProvider

è¯·å®ç°ä¸€ä¸ªè‡ªå®šä¹‰ContentProviderï¼Œè¦æ±‚èƒ½å¤Ÿå¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œå¹¶è¯´æ˜å¦‚ä½•åœ¨å…¶ä»–åº”ç”¨ä¸­è®¿é—®è¯¥Providerã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

1. **è‡ªå®šä¹‰ContentProvider**ï¼š
```kotlin
class MyContentProvider : ContentProvider() {
    companion object {
        private const val AUTHORITY = "com.example.provider"
        private const val TABLE_NAME = "users"
        val CONTENT_URI: Uri = Uri.parse("content://$AUTHORITY/$TABLE_NAME")
        
        private const val CODE_USERS = 1
        private const val CODE_USER_ITEM = 2
        
        private val uriMatcher = UriMatcher(UriMatcher.NO_MATCH).apply {
            addURI(AUTHORITY, TABLE_NAME, CODE_USERS)
            addURI(AUTHORITY, "$TABLE_NAME/#", CODE_USER_ITEM)
        }
    }

    private lateinit var dbHelper: DatabaseHelper

    override fun onCreate(): Boolean {
        dbHelper = DatabaseHelper(context!!)
        return true
    }

    override fun query(
        uri: Uri,
        projection: Array<String>?,
        selection: String?,
        selectionArgs: Array<String>?,
        sortOrder: String?
    ): Cursor? {
        val db = dbHelper.readableDatabase
        val cursor = when (uriMatcher.match(uri)) {
            CODE_USERS -> db.query(
                TABLE_NAME,
                projection,
                selection,
                selectionArgs,
                null,
                null,
                sortOrder
            )
            CODE_USER_ITEM -> db.query(
                TABLE_NAME,
                projection,
                "_id = ?",
                arrayOf(uri.lastPathSegment),
                null,
                null,
                sortOrder
            )
            else -> throw IllegalArgumentException("Unknown URI: $uri")
        }
        cursor.setNotificationUri(context!!.contentResolver, uri)
        return cursor
    }

    override fun insert(uri: Uri, values: ContentValues?): Uri? {
        val db = dbHelper.writableDatabase
        val id = db.insert(TABLE_NAME, null, values)
        if (id > 0) {
            val newUri = ContentUris.withAppendedId(CONTENT_URI, id)
            context!!.contentResolver.notifyChange(newUri, null)
            return newUri
        }
        throw SQLException("Failed to insert row into $uri")
    }

    override fun update(
        uri: Uri,
        values: ContentValues?,
        selection: String?,
        selectionArgs: Array<String>?
    ): Int {
        val db = dbHelper.writableDatabase
        val count = when (uriMatcher.match(uri)) {
            CODE_USERS -> db.update(TABLE_NAME, values, selection, selectionArgs)
            CODE_USER_ITEM -> db.update(
                TABLE_NAME,
                values,
                "_id = ?",
                arrayOf(uri.lastPathSegment)
            )
            else -> throw IllegalArgumentException("Unknown URI: $uri")
        }
        if (count > 0) {
            context!!.contentResolver.notifyChange(uri, null)
        }
        return count
    }

    override fun delete(
        uri: Uri,
        selection: String?,
        selectionArgs: Array<String>?
    ): Int {
        val db = dbHelper.writableDatabase
        val count = when (uriMatcher.match(uri)) {
            CODE_USERS -> db.delete(TABLE_NAME, selection, selectionArgs)
            CODE_USER_ITEM -> db.delete(
                TABLE_NAME,
                "_id = ?",
                arrayOf(uri.lastPathSegment)
            )
            else -> throw IllegalArgumentException("Unknown URI: $uri")
        }
        if (count > 0) {
            context!!.contentResolver.notifyChange(uri, null)
        }
        return count
    }

    override fun getType(uri: Uri): String? {
        return when (uriMatcher.match(uri)) {
            CODE_USERS -> "vnd.android.cursor.dir/vnd.example.users"
            CODE_USER_ITEM -> "vnd.android.cursor.item/vnd.example.users"
            else -> throw IllegalArgumentException("Unknown URI: $uri")
        }
    }
}
```

2. **åœ¨AndroidManifest.xmlä¸­æ³¨å†Œ**ï¼š
```xml
<provider
    android:name=".MyContentProvider"
    android:authorities="com.example.provider"
    android:exported="true"
    android:permission="com.example.permission.READ_WRITE_DATA" />
```

3. **åœ¨å…¶ä»–åº”ç”¨ä¸­è®¿é—®**ï¼š
```kotlin
class OtherActivity : AppCompatActivity() {
    private fun accessProvider() {
        // æŸ¥è¯¢æ•°æ®
        val cursor = contentResolver.query(
            MyContentProvider.CONTENT_URI,
            null,
            null,
            null,
            null
        )

        // æ’å…¥æ•°æ®
        val values = ContentValues().apply {
            put("name", "å¼ ä¸‰")
            put("age", 25)
        }
        contentResolver.insert(MyContentProvider.CONTENT_URI, values)

        // æ›´æ–°æ•°æ®
        val updateValues = ContentValues().apply {
            put("age", 26)
        }
        contentResolver.update(
            MyContentProvider.CONTENT_URI,
            updateValues,
            "name = ?",
            arrayOf("å¼ ä¸‰")
        )

        // åˆ é™¤æ•°æ®
        contentResolver.delete(
            MyContentProvider.CONTENT_URI,
            "name = ?",
            arrayOf("å¼ ä¸‰")
        )
    }
}
```

4. **æ³¨æ„äº‹é¡¹**ï¼š
   - æƒé™å£°æ˜å’Œæ£€æŸ¥
   - æ•°æ®åº“æ“ä½œè¦åœ¨å·¥ä½œçº¿ç¨‹ä¸­æ‰§è¡Œ
   - URIåŒ¹é…è§„åˆ™è¦æ¸…æ™°æ˜ç¡®
   - æ³¨æ„æ•°æ®å˜åŒ–é€šçŸ¥æœºåˆ¶
</details>

### ğŸ”¥ é—®ç­”é¢˜4ï¼šActivityç”Ÿå‘½å‘¨æœŸ

è¯·è¯¦ç»†è¯´æ˜Activityçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œä»¥åŠå„ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„è°ƒç”¨æ—¶æœºå’Œä½¿ç”¨åœºæ™¯ã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

1. **å®Œæ•´ç”Ÿå‘½å‘¨æœŸ**ï¼š
   - onCreate(): Activityåˆ›å»ºæ—¶è°ƒç”¨
   - onStart(): Activityå˜ä¸ºå¯è§æ—¶è°ƒç”¨
   - onResume(): Activityè·å–ç„¦ç‚¹ï¼Œå¯ä¸ç”¨æˆ·äº¤äº’
   - onPause(): Activityå¤±å»ç„¦ç‚¹ï¼Œä½†ä»å¯è§
   - onStop(): Activityå®Œå…¨ä¸å¯è§
   - onDestroy(): Activityè¢«é”€æ¯
   - onRestart(): Activityä»åœæ­¢çŠ¶æ€é‡æ–°å¯åŠ¨

2. **ç”Ÿå‘½å‘¨æœŸè°ƒç”¨åœºæ™¯**ï¼š
```kotlin
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        // åˆå§‹åŒ–å·¥ä½œï¼šåŠ è½½å¸ƒå±€ã€ç»‘å®šè§†å›¾ã€åˆå§‹åŒ–æ•°æ®
    }

    override fun onStart() {
        super.onStart()
        // å‡†å¤‡ä¸ç”¨æˆ·äº¤äº’ï¼šæ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨ã€å¯åŠ¨åŠ¨ç”»
    }

    override fun onResume() {
        super.onResume()
        // å¼€å§‹ä¸ç”¨æˆ·äº¤äº’ï¼šå¼€å§‹æ¸¸æˆã€æ’­æ”¾è§†é¢‘
    }

    override fun onPause() {
        super.onPause()
        // é‡Šæ”¾ç³»ç»Ÿèµ„æºï¼šæš‚åœæ¸¸æˆã€åœæ­¢è§†é¢‘
    }

    override fun onStop() {
        super.onStop()
        // é‡Šæ”¾é‡é‡çº§èµ„æºï¼šæ³¨é”€å¹¿æ’­ã€åœæ­¢åŠ¨ç”»
    }

    override fun onDestroy() {
        super.onDestroy()
        // æ¸…ç†èµ„æºï¼šè§£ç»‘æœåŠ¡ã€å…³é—­æ•°æ®åº“
    }

    override fun onRestart() {
        super.onRestart()
        // é‡æ–°åˆå§‹åŒ–æ•°æ®
    }
}
```

3. **ä½¿ç”¨åœºæ™¯**ï¼š
   - æ•°æ®æŒä¹…åŒ–
   - åŠ¨æ€æƒé™ç”³è¯·
   - å±å¹•æ—‹è½¬å¤„ç†
   - å‰åå°åˆ‡æ¢å¤„ç†

4. **æœ€ä½³å®è·µ**ï¼š
   - è½»é‡çº§æ“ä½œæ”¾åœ¨onStart/onStop
   - é‡é‡çº§æ“ä½œæ”¾åœ¨onCreate/onDestroy
   - ä½¿ç”¨ViewModelç®¡ç†UIæ•°æ®
   - ä½¿ç”¨onSaveInstanceStateä¿å­˜çŠ¶æ€
</details>

### ğŸ”¥ é—®ç­”é¢˜5ï¼šFragmentä½¿ç”¨ä¸ç”Ÿå‘½å‘¨æœŸ

è¯·è¯¦ç»†è¯´æ˜Fragmentçš„ä½¿ç”¨æ–¹å¼ã€ç”Ÿå‘½å‘¨æœŸä»¥åŠä¸Activityçš„å…³ç³»ã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

1. **Fragmentä½¿ç”¨æ–¹å¼**ï¼š
```kotlin
// 1. å®šä¹‰Fragment
class MyFragment : Fragment() {
    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        return inflater.inflate(R.layout.fragment_my, container, false)
    }
}

// 2. æ·»åŠ Fragment
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        supportFragmentManager.beginTransaction()
            .add(R.id.container, MyFragment())
            .commit()
    }
}
```

2. **ç”Ÿå‘½å‘¨æœŸæ–¹æ³•**ï¼š
   - onAttach(): Fragmentå’ŒActivityå»ºç«‹å…³è”
   - onCreate(): Fragmentåˆ›å»º
   - onCreateView(): åˆ›å»ºFragmentçš„è§†å›¾
   - onViewCreated(): è§†å›¾åˆ›å»ºå®Œæˆ
   - onActivityCreated(): Activityçš„onCreate()å®Œæˆ
   - onStart(): Fragmentå¯è§
   - onResume(): Fragmentå¯äº¤äº’
   - onPause(): Fragmentä¸å¯äº¤äº’
   - onStop(): Fragmentä¸å¯è§
   - onDestroyView(): Fragmentè§†å›¾é”€æ¯
   - onDestroy(): Fragmentå®ä¾‹é”€æ¯
   - onDetach(): Fragmentå’ŒActivityè§£é™¤å…³è”

3. **Fragmenté€šä¿¡**ï¼š
```kotlin
// 1. å®šä¹‰æ¥å£
interface OnFragmentInteractionListener {
    fun onFragmentInteraction(data: String)
}

// 2. Fragmentä¸­
class MyFragment : Fragment() {
    private var listener: OnFragmentInteractionListener? = null

    override fun onAttach(context: Context) {
        super.onAttach(context)
        if (context is OnFragmentInteractionListener) {
            listener = context
        }
    }

    private fun sendDataToActivity() {
        listener?.onFragmentInteraction("æ•°æ®")
    }

    override fun onDetach() {
        super.onDetach()
        listener = null
    }
}

// 3. Activityä¸­
class MainActivity : AppCompatActivity(), OnFragmentInteractionListener {
    override fun onFragmentInteraction(data: String) {
        // å¤„ç†æ¥è‡ªFragmentçš„æ•°æ®
    }
}
```

4. **æœ€ä½³å®è·µ**ï¼š
   - ä½¿ç”¨ViewModelå…±äº«æ•°æ®
   - ä½¿ç”¨ViewPager2ç®¡ç†å¤šä¸ªFragment
   - ä½¿ç”¨Navigationç»„ä»¶ç®¡ç†Fragmentå¯¼èˆª
   - é¿å…FragmentåµŒå¥—è¿‡æ·±
</details>

### ğŸ”¥ é—®ç­”é¢˜6ï¼šServiceä¿æ´»æ–¹æ¡ˆ

è¯·è¯¦ç»†è¯´æ˜Androidä¸­Serviceçš„ä¿æ´»æ–¹æ¡ˆä»¥åŠå„ç§æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

1. **å‰å°Service**ï¼š
```kotlin
class ForegroundService : Service() {
    override fun onCreate() {
        super.onCreate()
        val notification = NotificationCompat.Builder(this, CHANNEL_ID)
            .setContentTitle("æœåŠ¡è¿è¡Œä¸­")
            .setSmallIcon(R.drawable.ic_notification)
            .build()

        startForeground(1, notification)
    }
}
```

2. **åŒè¿›ç¨‹å®ˆæŠ¤**ï¼š
```kotlin
// æœ¬åœ°Service
class LocalService : Service() {
    private val connection = object : ServiceConnection {
        override fun onServiceConnected(name: ComponentName?, service: IBinder?) {
            // å»ºç«‹è¿æ¥
        }

        override fun onServiceDisconnected(name: ComponentName?) {
            // æ–­å¼€è¿æ¥åé‡æ–°ç»‘å®š
            bindService(Intent(this@LocalService, RemoteService::class.java),
                this, Context.BIND_IMPORTANT)
        }
    }
}

// è¿œç¨‹Service
class RemoteService : Service() {
    // ç±»ä¼¼å®ç°
}
```

3. **ç³»ç»Ÿå¹¿æ’­ç›‘å¬**ï¼š
```kotlin
class BootReceiver : BroadcastReceiver() {
    override fun onReceive(context: Context?, intent: Intent?) {
        if (intent?.action == Intent.ACTION_BOOT_COMPLETED) {
            // å¯åŠ¨Service
            context?.startService(Intent(context, MyService::class.java))
        }
    }
}
```

4. **WorkManagerå®šæ—¶ä»»åŠ¡**ï¼š
```kotlin
class MyWorker(context: Context, params: WorkerParameters) :
    Worker(context, params) {

    override fun doWork(): Result {
        // æ‰§è¡Œä»»åŠ¡
        return Result.success()
    }
}

// ä½¿ç”¨
val workRequest = PeriodicWorkRequestBuilder<MyWorker>(
    15, TimeUnit.MINUTES
).build()

WorkManager.getInstance(context).enqueue(workRequest)
```

5. **å„æ–¹æ¡ˆä¼˜ç¼ºç‚¹**ï¼š
   - å‰å°Service
     * ä¼˜ç‚¹ï¼šç¨³å®šæ€§é«˜ï¼Œç”¨æˆ·å¯æ„ŸçŸ¥
     * ç¼ºç‚¹ï¼šé€šçŸ¥æ å¸¸é©»ï¼Œè€—ç”µ
   - åŒè¿›ç¨‹å®ˆæŠ¤
     * ä¼˜ç‚¹ï¼šç›¸äº’å”¤é†’ï¼Œæé«˜å­˜æ´»ç‡
     * ç¼ºç‚¹ï¼šç³»ç»Ÿèµ„æºæ¶ˆè€—å¤§
   - ç³»ç»Ÿå¹¿æ’­
     * ä¼˜ç‚¹ï¼šå¼€æœºè‡ªå¯åŠ¨
     * ç¼ºç‚¹ï¼šä¸åŒç³»ç»Ÿç‰ˆæœ¬é™åˆ¶å¤š
   - WorkManager
     * ä¼˜ç‚¹ï¼šç³»ç»Ÿè°ƒåº¦ï¼Œçœç”µ
     * ç¼ºç‚¹ï¼šæ‰§è¡Œæ—¶é—´ä¸ç²¾ç¡®

6. **æ³¨æ„äº‹é¡¹**ï¼š
   - éµå®ˆç³»ç»Ÿè§„èŒƒï¼Œé¿å…è¿‡åº¦ä¿æ´»
   - è€ƒè™‘ç”¨æˆ·ä½“éªŒå’Œç”µæ± æ¶ˆè€—
   - é€‚é…ä¸åŒAndroidç‰ˆæœ¬
   - åšå¥½è¿›ç¨‹è¢«æ€çš„å®¹é”™å¤„ç†
</details>