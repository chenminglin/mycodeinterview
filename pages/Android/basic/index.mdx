# AndroidåŸºç¡€é¢è¯•é¢˜

æœ¬ç« èŠ‚åŒ…å«AndroidåŸºç¡€çŸ¥è¯†ç›¸å…³çš„é¢è¯•é¢˜ï¼Œæ¶µç›–Activityç”Ÿå‘½å‘¨æœŸã€Fragmentã€Intentç­‰æ ¸å¿ƒæ¦‚å¿µã€‚

## Activityç”Ÿå‘½å‘¨æœŸ

### ğŸ”¥ é€‰æ‹©é¢˜1ï¼šActivityç”Ÿå‘½å‘¨æœŸ

ä»¥ä¸‹å…³äºActivityç”Ÿå‘½å‘¨æœŸçš„è¯´æ³•ï¼Œé”™è¯¯çš„æ˜¯ï¼š

A. onCreate()æ–¹æ³•åœ¨Activityç¬¬ä¸€æ¬¡åˆ›å»ºæ—¶è°ƒç”¨
B. onResume()æ–¹æ³•åœ¨Activityå˜å¾—å¯è§æ—¶è°ƒç”¨
C. onPause()æ–¹æ³•åœ¨Activityå®Œå…¨ä¸å¯è§ä¹‹åè°ƒç”¨
D. onDestroy()æ–¹æ³•åœ¨Activityè¢«é”€æ¯å‰è°ƒç”¨

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼šC**

**è§£æï¼š**
- onPause()æ–¹æ³•æ˜¯åœ¨Activityéƒ¨åˆ†ä¸å¯è§æ—¶è°ƒç”¨ï¼Œè€Œä¸æ˜¯å®Œå…¨ä¸å¯è§ä¹‹å
- Activityç”Ÿå‘½å‘¨æœŸçš„æ­£ç¡®é¡ºåºæ˜¯ï¼š
  1. onCreate(): Activityåˆ›å»ºæ—¶è°ƒç”¨
  2. onStart(): Activityå³å°†å¯è§æ—¶è°ƒç”¨
  3. onResume(): Activityå¯è§ä¸”å¯äº¤äº’æ—¶è°ƒç”¨
  4. onPause(): Activityéƒ¨åˆ†ä¸å¯è§æ—¶è°ƒç”¨
  5. onStop(): Activityå®Œå…¨ä¸å¯è§æ—¶è°ƒç”¨
  6. onDestroy(): Activityé”€æ¯å‰è°ƒç”¨

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒonPause()æ–¹æ³•æ‰§è¡Œæ—¶ï¼ŒActivityè¿˜æœªå®Œå…¨ä¸å¯è§ï¼Œæ­¤æ—¶ç”¨æˆ·ä»å¯èƒ½çœ‹åˆ°éƒ¨åˆ†ç•Œé¢ã€‚å®Œå…¨ä¸å¯è§æ˜¯åœ¨onStop()æ–¹æ³•æ‰§è¡Œæ—¶çš„çŠ¶æ€ã€‚
</details>

### ğŸ”¥ é—®ç­”é¢˜1ï¼šActivityçš„å¯åŠ¨æ¨¡å¼

è¯·è¯¦ç»†è¯´æ˜Androidä¸­Activityçš„å››ç§å¯åŠ¨æ¨¡å¼ï¼ˆLaunchModeï¼‰çš„ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯ã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

Androidä¸­Activityæœ‰å››ç§å¯åŠ¨æ¨¡å¼ï¼š

1. **standardï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰**
   - ç‰¹ç‚¹ï¼šæ¯æ¬¡å¯åŠ¨éƒ½ä¼šåˆ›å»ºæ–°çš„å®ä¾‹
   - ä½¿ç”¨åœºæ™¯ï¼šå¤§å¤šæ•°Activityçš„é»˜è®¤æ¨¡å¼
   - ç¤ºä¾‹ï¼šæ–°é—»è¯¦æƒ…é¡µé¢

2. **singleTopï¼ˆæ ˆé¡¶å¤ç”¨æ¨¡å¼ï¼‰**
   - ç‰¹ç‚¹ï¼šå¦‚æœè¦å¯åŠ¨çš„Activityå·²ç»åœ¨æ ˆé¡¶ï¼Œåˆ™å¤ç”¨è¯¥å®ä¾‹ï¼Œå¦åˆ™åˆ›å»ºæ–°å®ä¾‹
   - ä½¿ç”¨åœºæ™¯ï¼šé¿å…é‡å¤åˆ›å»ºé¡µé¢ï¼Œå¦‚æœç´¢é¡µé¢
   - ç¤ºä¾‹ï¼šæ¥æ”¶æ¨é€æ¶ˆæ¯çš„é¡µé¢

3. **singleTaskï¼ˆæ ˆå†…å¤ç”¨æ¨¡å¼ï¼‰**
   - ç‰¹ç‚¹ï¼šåœ¨å½“å‰ä»»åŠ¡æ ˆä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¯¥Activityå®ä¾‹ï¼Œå¦‚æœå­˜åœ¨åˆ™å°†å…¶ä¸Šé¢çš„Activityå…¨éƒ¨å‡ºæ ˆ
   - ä½¿ç”¨åœºæ™¯ï¼šåº”ç”¨ç¨‹åºçš„ä¸»é¡µé¢
   - ç¤ºä¾‹ï¼šAppçš„é¦–é¡µã€è´­ç‰©è½¦é¡µé¢

4. **singleInstanceï¼ˆå•å®ä¾‹æ¨¡å¼ï¼‰**
   - ç‰¹ç‚¹ï¼šActivityä¼šå•ç‹¬ä½äºä¸€ä¸ªä»»åŠ¡æ ˆä¸­
   - ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦ä¸å…¶ä»–åº”ç”¨å…±äº«çš„é¡µé¢
   - ç¤ºä¾‹ï¼šæ‹¨å·é¡µé¢ã€é—¹é’Ÿæé†’é¡µé¢

**ä»£ç ç¤ºä¾‹ï¼š**
```xml
<!-- åœ¨AndroidManifest.xmlä¸­è®¾ç½®å¯åŠ¨æ¨¡å¼ -->
<activity
    android:name=".MainActivity"
    android:launchMode="singleTask" />
```

**æ³¨æ„äº‹é¡¹ï¼š**
1. å¯åŠ¨æ¨¡å¼å¯ä»¥åœ¨AndroidManifestä¸­é€šè¿‡android:launchModeå±æ€§è®¾ç½®
2. ä¹Ÿå¯ä»¥é€šè¿‡Intentçš„flagsåŠ¨æ€è®¾ç½®
3. Intentçš„flagsä¼˜å…ˆçº§é«˜äºAndroidManifestä¸­çš„è®¾ç½®
</details>

### å¡«ç©ºé¢˜1ï¼šActivityçŠ¶æ€ä¿å­˜

å½“Activityå› ç³»ç»Ÿå†…å­˜ä¸è¶³è¢«å›æ”¶æ—¶ï¼Œå¯ä»¥é€šè¿‡______æ–¹æ³•ä¿å­˜çŠ¶æ€ï¼Œå¹¶åœ¨Activityé‡å»ºæ—¶é€šè¿‡______æ–¹æ³•æ¢å¤çŠ¶æ€ã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š** onSaveInstanceStateã€onRestoreInstanceState

**è§£æï¼š**
1. onSaveInstanceState()æ–¹æ³•ç”¨äºä¿å­˜Activityçš„çŠ¶æ€ï¼Œå®ƒä¼šåœ¨ä»¥ä¸‹æƒ…å†µè¢«è°ƒç”¨ï¼š
   - ç³»ç»Ÿå†…å­˜ä¸è¶³ï¼ŒActivityå¯èƒ½è¢«å›æ”¶
   - ç”¨æˆ·æŒ‰ä¸‹Homeé”®
   - å±å¹•æ—‹è½¬ç­‰é…ç½®å˜åŒ–

2. ä½¿ç”¨ç¤ºä¾‹ï¼š
```kotlin
override fun onSaveInstanceState(outState: Bundle) {
    super.onSaveInstanceState(outState)
    // ä¿å­˜æ•°æ®
    outState.putString("key", "value")
    outState.putInt("position", currentPosition)
}

override fun onRestoreInstanceState(savedInstanceState: Bundle) {
    super.onRestoreInstanceState(savedInstanceState)
    // æ¢å¤æ•°æ®
    val value = savedInstanceState.getString("key")
    val position = savedInstanceState.getInt("position")
}
```

3. æœ€ä½³å®è·µï¼š
   - åªä¿å­˜å¿…è¦çš„æ•°æ®ï¼Œé¿å…ä¿å­˜å¤§é‡æ•°æ®
   - è€ƒè™‘ä½¿ç”¨ViewModelæ¥ç®¡ç†UIç›¸å…³çš„æ•°æ®
   - æŒä¹…åŒ–çš„æ•°æ®åº”è¯¥å­˜å‚¨åœ¨æ•°æ®åº“æˆ–SharedPreferencesä¸­
</details>

## Intentä½¿ç”¨

### ğŸ”¥ ç¼–ç¨‹é¢˜1ï¼šå®ç°Activityè·³è½¬

è¯·ç¼–å†™ä»£ç å®ç°å¸¦å‚æ•°çš„Activityè·³è½¬ï¼Œå¹¶åœ¨ç›®æ ‡Activityä¸­æ¥æ”¶å‚æ•°ã€‚è¦æ±‚ï¼š
1. ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å«idã€nameã€ageï¼‰
2. ä½¿ç”¨æ˜¾å¼Intentå’Œéšå¼Intentä¸¤ç§æ–¹å¼

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

1. é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ•°æ®ç±»ï¼š
```kotlin
data class User(
    val id: Long,
    val name: String,
    val age: Int
) : Parcelable {
    constructor(parcel: Parcel) : this(
        parcel.readLong(),
        parcel.readString() ?: "",
        parcel.readInt()
    )

    override fun writeToParcel(parcel: Parcel, flags: Int) {
        parcel.writeLong(id)
        parcel.writeString(name)
        parcel.writeInt(age)
    }

    override fun describeContents(): Int = 0

    companion object CREATOR : Parcelable.Creator<User> {
        override fun createFromParcel(parcel: Parcel): User = User(parcel)
        override fun newArray(size: Int): Array<User?> = arrayOfNulls(size)
    }
}
```

2. æ˜¾å¼Intentè·³è½¬ï¼š
```kotlin
// åœ¨æºActivityä¸­
class SourceActivity : AppCompatActivity() {
    private fun startDetailActivity() {
        val user = User(1, "å¼ ä¸‰", 25)
        val intent = Intent(this, DetailActivity::class.java).apply {
            putExtra("user", user)
        }
        startActivity(intent)
    }
}

// åœ¨ç›®æ ‡Activityä¸­
class DetailActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        intent.getParcelableExtra<User>("user")?.let { user ->
            // ä½¿ç”¨useræ•°æ®
            Log.d("DetailActivity", "ç”¨æˆ·ä¿¡æ¯ï¼š${user.name}, ${user.age}å²")
        }
    }
}
```

3. éšå¼Intentè·³è½¬ï¼š
```kotlin
// åœ¨AndroidManifest.xmlä¸­é…ç½®
<activity android:name=".DetailActivity">
    <intent-filter>
        <action android:name="com.example.action.VIEW_USER" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>

// åœ¨æºActivityä¸­
class SourceActivity : AppCompatActivity() {
    private fun startDetailActivity() {
        val user = User(1, "å¼ ä¸‰", 25)
        val intent = Intent("com.example.action.VIEW_USER").apply {
            putExtra("user", user)
        }
        startActivity(intent)
    }
}
```

**æ³¨æ„äº‹é¡¹ï¼š**
1. ä¼ é€’å¤§é‡æ•°æ®æ—¶è€ƒè™‘ä½¿ç”¨Bundle
2. å¯¹è±¡ä¼ é€’å»ºè®®å®ç°Parcelableè€Œä¸æ˜¯Serializable
3. éšå¼Intentéœ€è¦æ³¨æ„å®‰å…¨æ€§ï¼Œå¯èƒ½è¢«å…¶ä»–åº”ç”¨æ¥æ”¶
4. å»ºè®®ä½¿ç”¨å¸¸é‡å®šä¹‰Actionå’ŒExtraçš„key
</details>

## Fragment

### ğŸ”¥ é—®ç­”é¢˜2ï¼šFragmentç”Ÿå‘½å‘¨æœŸ

è¯·è¯¦ç»†æè¿°Fragmentçš„ç”Ÿå‘½å‘¨æœŸï¼Œä»¥åŠFragmentä¸Activityç”Ÿå‘½å‘¨æœŸçš„å…³ç³»ã€‚

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼š**

1. **Fragmentç”Ÿå‘½å‘¨æœŸæ–¹æ³•**ï¼š
   - onAttach(): Fragmentå’ŒActivityå»ºç«‹å…³è”
   - onCreate(): Fragmentåˆ›å»º
   - onCreateView(): åˆ›å»ºFragmentçš„è§†å›¾
   - onViewCreated(): Fragmentçš„è§†å›¾åˆ›å»ºå®Œæˆ
   - onStart(): Fragmentå¯è§
   - onResume(): Fragmentå¯äº¤äº’
   - onPause(): Fragmentä¸å¯äº¤äº’
   - onStop(): Fragmentä¸å¯è§
   - onDestroyView(): Fragmentè§†å›¾è¢«ç§»é™¤
   - onDestroy(): Fragmentå®ä¾‹è¢«é”€æ¯
   - onDetach(): Fragmentå’ŒActivityè§£é™¤å…³è”

2. **ä¸Activityç”Ÿå‘½å‘¨æœŸçš„å…³ç³»**ï¼š
   - Activity onCreate() â†’ Fragment onAttach() â†’ Fragment onCreate()
   - Activity onStart() â†’ Fragment onStart()
   - Activity onResume() â†’ Fragment onResume()
   - Activity onPause() â†’ Fragment onPause()
   - Activity onStop() â†’ Fragment onStop()
   - Activity onDestroy() â†’ Fragment onDetach()

3. **ç”Ÿå‘½å‘¨æœŸæœ€ä½³å®è·µ**ï¼š
```kotlin
class MyFragment : Fragment() {
    private var _binding: FragmentMyBinding? = null
    private val binding get() = _binding!!

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        _binding = FragmentMyBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        // åˆå§‹åŒ–è§†å›¾
        setupViews()
        // è§‚å¯ŸViewModel
        observeViewModel()
    }

    override fun onDestroyView() {
        super.onDestroyView()
        _binding = null // é¿å…å†…å­˜æ³„æ¼
    }

    private fun setupViews() {
        // åˆå§‹åŒ–è§†å›¾ç»„ä»¶
    }

    private fun observeViewModel() {
        // è®¾ç½®ViewModelè§‚å¯Ÿè€…
    }
}
```

4. **æ³¨æ„äº‹é¡¹**ï¼š
   - Fragmentç”Ÿå‘½å‘¨æœŸæ¯”Activityæ›´å¤æ‚
   - ä½¿ç”¨ViewBindingæ—¶æ³¨æ„åœ¨onDestroyViewä¸­é‡Šæ”¾
   - é¿å…åœ¨Fragmentæ„é€ å‡½æ•°ä¸­ä¼ å‚ï¼Œä½¿ç”¨newInstanceé™æ€æ–¹æ³•
   - ä½¿ç”¨FragmentManageræ—¶æ³¨æ„Fragmenté‡å é—®é¢˜
   - å»ºè®®ä½¿ç”¨Navigationç»„ä»¶ç®¡ç†Fragment
</details>