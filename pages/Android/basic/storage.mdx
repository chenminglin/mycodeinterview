# Androidå­˜å‚¨æœºåˆ¶é¢è¯•é¢˜

æœ¬ç« èŠ‚åŒ…å«Androidå­˜å‚¨æœºåˆ¶ç›¸å…³çš„é¢è¯•é¢˜ï¼Œæ¶µç›–å†…éƒ¨å­˜å‚¨ã€å¤–éƒ¨å­˜å‚¨ã€æ•°æ®åº“ã€SharedPreferencesç­‰æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚

## åŸºç¡€æ¦‚å¿µ

### ğŸ”¥ é€‰æ‹©é¢˜1ï¼šAndroidå­˜å‚¨ç±»å‹

å…³äºAndroidå­˜å‚¨ç±»å‹ï¼Œä»¥ä¸‹è¯´æ³•é”™è¯¯çš„æ˜¯ï¼š

A. å†…éƒ¨å­˜å‚¨ç©ºé—´æ˜¯åº”ç”¨ç§æœ‰çš„ï¼Œå…¶ä»–åº”ç”¨æ— æ³•è®¿é—®
B. å¤–éƒ¨å­˜å‚¨ç©ºé—´åœ¨Android 10åŠä»¥ä¸Šç‰ˆæœ¬é»˜è®¤é‡‡ç”¨åˆ†åŒºå­˜å‚¨
C. SharedPreferencesé€‚åˆå­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ®
D. SQLiteæ•°æ®åº“æ”¯æŒäº‹åŠ¡æ“ä½œå’ŒSQLæŸ¥è¯¢

<details>
<summary>ç­”æ¡ˆä¸è§£æ</summary>

**ç­”æ¡ˆï¼šC**

è§£æï¼š
1. å†…éƒ¨å­˜å‚¨ç¡®å®æ˜¯åº”ç”¨ç§æœ‰çš„ï¼Œå…¶ä»–åº”ç”¨åœ¨æ²¡æœ‰rootæƒé™çš„æƒ…å†µä¸‹æ— æ³•è®¿é—®
2. Android 10å¼•å…¥äº†åˆ†åŒºå­˜å‚¨ï¼Œé™åˆ¶äº†åº”ç”¨å¯¹å¤–éƒ¨å­˜å‚¨çš„è®¿é—®æƒé™
3. SharedPreferencesé€‚åˆå­˜å‚¨è½»é‡çº§çš„é”®å€¼å¯¹æ•°æ®ï¼Œä¸é€‚åˆå­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ®
4. SQLiteæ•°æ®åº“ç¡®å®æ”¯æŒäº‹åŠ¡æ“ä½œå’Œæ ‡å‡†çš„SQLæŸ¥è¯¢è¯­å¥
</details>

### ğŸ”¥ é—®ç­”é¢˜1ï¼šAndroidå­˜å‚¨æœ€ä½³å®è·µ

**é—®é¢˜ï¼šè¯·è¯¦ç»†è¯´æ˜Androidä¸­å„ç§å­˜å‚¨æ–¹å¼çš„ä½¿ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µã€‚**

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

1. **å†…éƒ¨å­˜å‚¨**
   - ä½¿ç”¨åœºæ™¯ï¼š
     * å­˜å‚¨åº”ç”¨ç§æœ‰æ–‡ä»¶
     * ç¼“å­˜æ–‡ä»¶
     * ä¸´æ—¶æ–‡ä»¶
   - æœ€ä½³å®è·µï¼š
     * åŠæ—¶æ¸…ç†ç¼“å­˜æ–‡ä»¶
     * æ³¨æ„å­˜å‚¨ç©ºé—´å¤§å°é™åˆ¶
     * ä½¿ç”¨Contextæä¾›çš„æ–‡ä»¶æ“ä½œæ–¹æ³•

2. **å¤–éƒ¨å­˜å‚¨**
   - ä½¿ç”¨åœºæ™¯ï¼š
     * å­˜å‚¨ç”¨æˆ·å¯è§çš„æ–‡ä»¶
     * å¤§æ–‡ä»¶å­˜å‚¨
     * åº”ç”¨é—´å…±äº«æ–‡ä»¶
   - æœ€ä½³å®è·µï¼š
     * é€‚é…Android 10çš„åˆ†åŒºå­˜å‚¨
     * ä½¿ç”¨MediaStore API
     * æ³¨æ„æƒé™ç”³è¯·

3. **SharedPreferences**
   - ä½¿ç”¨åœºæ™¯ï¼š
     * å­˜å‚¨ç”¨æˆ·è®¾ç½®
     * å­˜å‚¨ç™»å½•çŠ¶æ€
     * è½»é‡çº§æ•°æ®ç¼“å­˜
   - æœ€ä½³å®è·µï¼š
     * é¿å…å­˜å‚¨å¤§é‡æ•°æ®
     * ä½¿ç”¨commit()è¿˜æ˜¯apply()
     * æ³¨æ„å¤šè¿›ç¨‹é—®é¢˜

4. **SQLiteæ•°æ®åº“**
   - ä½¿ç”¨åœºæ™¯ï¼š
     * å­˜å‚¨ç»“æ„åŒ–æ•°æ®
     * éœ€è¦å¤æ‚æŸ¥è¯¢
     * å¤§é‡æ•°æ®çš„CRUDæ“ä½œ
   - æœ€ä½³å®è·µï¼š
     * ä½¿ç”¨äº‹åŠ¡æé«˜æ€§èƒ½
     * æ­£ç¡®ç®¡ç†æ•°æ®åº“è¿æ¥
     * ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
</details>

### ğŸ”¥ ç¼–ç¨‹é¢˜ï¼šå­˜å‚¨å·¥å…·ç±»

**é—®é¢˜ï¼šå®ç°ä¸€ä¸ªé€šç”¨çš„å­˜å‚¨å·¥å…·ç±»ï¼Œæ”¯æŒæ–‡ä»¶å­˜å‚¨ã€SharedPreferenceså’ŒSQLiteæ•°æ®åº“æ“ä½œã€‚**

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

```java
public class StorageHelper {
    private Context context;
    private SQLiteDatabase database;
    private SharedPreferences preferences;
    
    public StorageHelper(Context context) {
        this.context = context;
        preferences = context.getSharedPreferences("app_settings", Context.MODE_PRIVATE);
    }
    
    // æ–‡ä»¶å­˜å‚¨ç›¸å…³æ–¹æ³•
    public void saveFile(String fileName, String content) {
        try {
            FileOutputStream fos = context.openFileOutput(fileName, Context.MODE_PRIVATE);
            fos.write(content.getBytes());
            fos.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    
    public String readFile(String fileName) {
        try {
            FileInputStream fis = context.openFileInput(fileName);
            BufferedReader reader = new BufferedReader(new InputStreamReader(fis));
            StringBuilder sb = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) {
                sb.append(line).append('\n');
            }
            reader.close();
            fis.close();
            return sb.toString();
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }
    
    // SharedPreferencesç›¸å…³æ–¹æ³•
    public void savePreference(String key, String value) {
        preferences.edit().putString(key, value).apply();
    }
    
    public String getPreference(String key, String defaultValue) {
        return preferences.getString(key, defaultValue);
    }
    
    public void clearPreferences() {
        preferences.edit().clear().apply();
    }
    
    // æ•°æ®åº“ç›¸å…³æ–¹æ³•
    private static class DatabaseHelper extends SQLiteOpenHelper {
        private static final String DATABASE_NAME = "app_database";
        private static final int DATABASE_VERSION = 1;
        
        public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
        
        @Override
        public void onCreate(SQLiteDatabase db) {
            // åˆ›å»ºæ•°æ®è¡¨
            db.execSQL("CREATE TABLE IF NOT EXISTS users "
                    + "(id INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + "name TEXT, "
                    + "email TEXT)");
        }
        
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // æ•°æ®åº“å‡çº§é€»è¾‘
        }
    }
    
    public void openDatabase() {
        DatabaseHelper helper = new DatabaseHelper(context);
        database = helper.getWritableDatabase();
    }
    
    public void closeDatabase() {
        if (database != null && database.isOpen()) {
            database.close();
        }
    }
    
    public long insertUser(String name, String email) {
        ContentValues values = new ContentValues();
        values.put("name", name);
        values.put("email", email);
        return database.insert("users", null, values);
    }
    
    public List<User> queryUsers() {
        List<User> users = new ArrayList<>();
        Cursor cursor = database.query("users", null, null, null, null, null, null);
        
        if (cursor.moveToFirst()) {
            do {
                User user = new User();
                user.id = cursor.getLong(cursor.getColumnIndex("id"));
                user.name = cursor.getString(cursor.getColumnIndex("name"));
                user.email = cursor.getString(cursor.getColumnIndex("email"));
                users.add(user);
            } while (cursor.moveToNext());
        }
        
        cursor.close();
        return users;
    }
    
    // ç¼“å­˜æ–‡ä»¶ç®¡ç†
    public File getCacheFile(String fileName) {
        return new File(context.getCacheDir(), fileName);
    }
    
    public void clearCache() {
        File cacheDir = context.getCacheDir();
        if (cacheDir != null && cacheDir.exists()) {
            File[] files = cacheDir.listFiles();
            if (files != null) {
                for (File file : files) {
                    file.delete();
                }
            }
        }
    }
    
    // å¤–éƒ¨å­˜å‚¨æ“ä½œ
    public boolean isExternalStorageWritable() {
        return Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED);
    }
    
    public File getExternalFile(String fileName) {
        if (isExternalStorageWritable()) {
            return new File(context.getExternalFilesDir(null), fileName);
        }
        return null;
    }
    
    // ä½¿ç”¨ç¤ºä¾‹
    public void exampleUsage() {
        // æ–‡ä»¶å­˜å‚¨ç¤ºä¾‹
        saveFile("test.txt", "Hello, World!");
        String content = readFile("test.txt");
        
        // SharedPreferencesç¤ºä¾‹
        savePreference("user_name", "John");
        String userName = getPreference("user_name", "");
        
        // æ•°æ®åº“ç¤ºä¾‹
        openDatabase();
        long userId = insertUser("John", "john@example.com");
        List<User> users = queryUsers();
        closeDatabase();
        
        // ç¼“å­˜æ–‡ä»¶ç¤ºä¾‹
        File cacheFile = getCacheFile("temp.txt");
        // ä½¿ç”¨å®Œåæ¸…ç†ç¼“å­˜
        clearCache();
        
        // å¤–éƒ¨å­˜å‚¨ç¤ºä¾‹
        if (isExternalStorageWritable()) {
            File externalFile = getExternalFile("external.txt");
            // è¿›è¡Œæ–‡ä»¶æ“ä½œ
        }
    }
    
    // æ•°æ®æ¨¡å‹
    public static class User {
        public long id;
        public String name;
        public String email;
    }
}
```

ä»£ç è¯´æ˜ï¼š
1. å®ç°äº†å®Œæ•´çš„å­˜å‚¨åŠŸèƒ½ï¼š
   - æ–‡ä»¶å­˜å‚¨
   - SharedPreferences
   - SQLiteæ•°æ®åº“
   - ç¼“å­˜ç®¡ç†
   - å¤–éƒ¨å­˜å‚¨
2. æä¾›äº†ç®€å•æ˜“ç”¨çš„API
3. åŒ…å«å¼‚å¸¸å¤„ç†å’Œèµ„æºç®¡ç†
4. æ”¯æŒå¤šç§æ•°æ®ç±»å‹
5. éµå¾ªAndroidå­˜å‚¨æœ€ä½³å®è·µ
6. åŒ…å«å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹
</details>